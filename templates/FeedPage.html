<!DOCTYPE html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
<style>
    body,h1,h2,h3,h4,h5,h6 {font-family: "Karma", sans-serif}
    .w3-bar-block .w3-bar-item {padding:20px}
</style>
<body>

<!-- Navbar -->
<div class="w3-top">
    <div class="w3-bar w3-orange w3-card w3-left-align w3-large">
        <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-red" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
        <a href="{{url_for('home')}}" class="w3-bar-item w3-button w3-padding-large w3-white">Home</a>
        <a href="{{url_for('jobs')}}" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Jobs</a>
        <a href="{{url_for('profile')}}" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Profile</a>
    </div>

    <!-- Navbar on small screens -->
    <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
        <a href="#" class="w3-bar-item w3-button w3-padding-large">Jobs</a>
        <a href="#" class="w3-bar-item w3-button w3-padding-large">Profile</a>
    </div>
</div>



<!-- !PAGE CONTENT! -->
<div class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px">
    <div class="w3-center w3-padding-16"><h2>Available Jobs</h2></div>
    <!-- Load icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- The form -->
    <form class="w3-center example" action="">
        <input type="text" placeholder="Search.." name="search">
        <button type="submit"><i class="fa fa-search"></i></button>
    </form>
    <form>
        <button id="basbana" formmethod="post"> bas buna</button>
    </form>
    <!--Grid-->
    <div class="w3-row-padding w3-padding-16 w3-center" id="food">
        {% for i in joblist %}
        <div style="border-style: solid; border-radius: 10px; border-color: orange; border-width: 1px;">
            <div style="float: left; font-size: 15px;">
                <label class="container">&nbsp;&nbsp;&nbsp;Select
                    <input type="checkbox" name="checkboxn" id="{{i.position}}">
                    <span class="checkmark"></span>
                </label>
            </div>
            <br>
            <h3>{{i.position}}</h3>
            <p><i>{{i.company}}</i></p>
            <p><i class="fa fa-map-marker">&nbsp;{{i.location}}</i></p>
            <p><b>Skills: </b>{{i.skills}}</p>
            <p>{{i.descrp}}</p>
            <button onclick="document.getElementById('id01').style.display='block'">Apply</button>
            <br>
            <br>

        </div>
        <br>
        {% endfor %}
    </div>

    <!-- Pagination -->
    <div class="w3-center w3-padding-32">
        <div class="w3-bar">
            <a href="#" class="w3-bar-item w3-button w3-hover-black">«</a>
            <a href="#" class="w3-bar-item w3-black w3-button">1</a>
            <a href="#" class="w3-bar-item w3-button w3-hover-black">2</a>
            <a href="#" class="w3-bar-item w3-button w3-hover-black">3</a>
            <a href="#" class="w3-bar-item w3-button w3-hover-black">4</a>
            <a href="#" class="w3-bar-item w3-button w3-hover-black">»</a>
        </div>
    </div>

    <hr id="about">

    <!-- The Modal -->
    <div id="id01" class="w3-modal">
        <div class="w3-modal-content">
            <div class="w3-container">
                <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                <p>Before applying for this job, you have to take a test.</p>
                <p>Are you ready?</p>
                <div style="text-align: center;"><button><a href="{{url_for('taketest')}}" style="text-decoration: none;"><b>Take the test</b></a></button></div>
                <br>
            </div>
        </div>
    </div>
</div>
<script>
    // Used to toggle the menu on small screens when clicking on the menu button
    function myFunction() {
        var x = document.getElementById("navDemo");
        if (x.className.indexOf("w3-show") == -1) {
            x.className += " w3-show";
        } else {
            x.className = x.className.replace(" w3-show", "");
        }
    }
    function test() {
        var checkedboxes = document.querySelectorAll('input[name=checkboxn]:checked');
        for(i=0; i<checkedboxes.length; i++){
            console.log(checkedboxes[i].Position);
        }
        return checkedboxes;
    }

    $(document).ready(function (e) {
        $("#basbana").click(function () {
            var checkedboxes = document.querySelectorAll('input[name=checkboxn]:checked');
            for(i=0; i<checkedboxes.length; i++){
                console.log(checkedboxes[i].id + "bu dönüyo");
            }
            var annen = JSON.stringify(checkedboxes[0].id)
            console.log(annen)
            console.log(checkedboxes + "kral naber");
            let anneninarrayi = Array.from(checkedboxes)
            console.log(anneninarrayi)
            $.ajax({
                type: "POST",
                url: "/comparison/",
                data: JSON.stringify(anneninarrayi),
                success: function () {
                    console.log("wololo")
                }
            })
        })

    });


</script>


</body>
</html>
